<!DOCTYPE html>
<html>
<head>
<title>Barcode Scanner with ZXing</title>
<script src="https://unpkg.com/@zxing/library@0.18.6/umd/index.min.js"></script>
</head>
<body>
 
<h1>Barcode Scanner</h1>
<video id="video" width="300" height="200" style="border: 1px solid black"></video>
<button id="startButton">Start Scanning</button>
<p>Scanned Code: <span id="result"></span></p>
 
<script>
    let selectedDeviceId;
    const codeReader = new ZXing.BrowserBarcodeReader()
    console.log('ZXing code reader initialized')
    codeReader.listVideoInputDevices()
        .then((videoInputDevices) => {
            selectedDeviceId = videoInputDevices[0].deviceId
            document.getElementById('startButton').addEventListener('click', () => {
                codeReader.decodeOnceFromVideoDevice(selectedDeviceId, 'video').then((result) => {
                    document.getElementById('result').textContent = result.text
                }).catch((err) => {
                    console.error(err)
                    document.getElementById('result').textContent = err
                })
                console.log(`Started continous decode from camera with id ${selectedDeviceId}`)
            })
        })
        .catch((err) => {
            console.error(err)
        })
</script>
 
</body>
</html>