<!DOCTYPE html>
<html lang="sv">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chatbot Hemsida</title>
    <script src="https://herrfors-48hd.aiagent.fi/integrations/float/ai-agent-float.js"></script>
    <!-- CSS fÃ¶r knappdesign -->
    <style>
        .language-selector {
            position: absolute;
            top: 10px;
            right: 30px;
            display: flex;
        }
        .language-selector button {
            background-color: #43413e;
            color: #fff;
            border: none;
            cursor: pointer;
            padding: 8px 12px;
            margin-left: 10px;
			margin-top: 40px;
            border-radius: 4px;
            font-size: 14px;
            transition: background-color 0.3s;
        }
        .language-selector button:hover {
            background-color: #0056b3;
        }
    </style>
</head>
<body style="overflow: hidden;">
    <!-- SprÃ¥kvals-knappar -->
    <div class="language-selector">
        <button onclick="changeIframeLanguage('sv')">Svenska</button>
        <button onclick="changeIframeLanguage('fi')">Suomi</button>
        <button onclick="changeIframeLanguage('en')">English</button>
    </div>

    <!-- Iframe -->
    <iframe id="myIframe" src="https://herrfors.fi/sv" width="100%" height="1500" frameBorder="0" style="border: none;"></iframe>

    <!-- AI Agent Container -->
    <div id="aiAgentContainer"></div>

    <!-- JavaScript fÃ¶r att hantera sprÃ¥kbyte -->
    <script>
        // Funktion fÃ¶r att skapa AI-agenten
        function createAIAgent(lang) {
            var aiAgentContainer = document.getElementById('aiAgentContainer');

            // Ta bort befintlig AI-agent om den finns
            aiAgentContainer.innerHTML = '';

            var aiAgent = document.createElement('ai-agent-float');
            aiAgent.setAttribute('id', 'aiAgent');
            aiAgent.setAttribute('header', 'Herrfors AI agent');
            aiAgent.setAttribute('agent', 'd5cafaa4-55aa-41ff-b781-c8150fa19f0f');
            aiAgent.setAttribute('server', 'https://herrfors-48hd.aiagent.fi/services/sva');
            aiAgent.setAttribute('enablescroll', 'true');
            aiAgent.setAttribute('dense', 'true');
            aiAgent.setAttribute('style', 'position: relative; z-index: 9999;');
            aiAgent.setAttribute('agenticon', 'https://i.imgur.com/kGeKLVB.png');
            aiAgent.setAttribute('primary', '#f49200');

            // SÃ¤tt sprÃ¥kbaserade attribut
            switch(lang) {
                case 'sv':
                    aiAgent.setAttribute('greeting', 'Hej, hur kan jag hjÃ¤lpa dig? âš¡ðŸ”ŒðŸ’¡');
                    aiAgent.setAttribute('openwindowtext', 'BehÃ¶ver du hjÃ¤lp?');
                    aiAgent.setAttribute('textinputplaceholder', 'StÃ¤ll en frÃ¥ga...');
                    break;
                case 'fi':
                    aiAgent.setAttribute('greeting', 'Hei, miten voin auttaa? âš¡ðŸ”ŒðŸ’¡');
                    aiAgent.setAttribute('openwindowtext', 'Tarvitsetko apua?');
                    aiAgent.setAttribute('textinputplaceholder', 'Kysy minulta jotain...');
                    break;
                case 'en':
                    aiAgent.setAttribute('greeting', 'Hello, how can I help you? âš¡ðŸ”ŒðŸ’¡');
                    aiAgent.setAttribute('openwindowtext', 'Do you need help?');
                    aiAgent.setAttribute('textinputplaceholder', 'Ask me anything...');
                    break;
            }

            aiAgentContainer.appendChild(aiAgent);
        }

        // Funktion fÃ¶r att Ã¤ndra iframens sprÃ¥k och uppdatera agenten
        function changeIframeLanguage(lang) {
            var iframe = document.getElementById('myIframe');
            iframe.src = 'https://herrfors.fi/' + lang;
            createAIAgent(lang);
        }

        // SÃ¤tt agentens sprÃ¥k vid sidladdning
        function setAgentLanguage() {
            var lang = getLanguageFromIframeSrc();
            createAIAgent(lang);
        }

        // Funktion fÃ¶r att hÃ¤mta sprÃ¥k frÃ¥n iframens URL
        function getLanguageFromIframeSrc() {
            var iframe = document.getElementById('myIframe');
            var src = iframe.src;
            if (src.includes('/sv')) {
                return 'sv';
            } else if (src.includes('/fi')) {
                return 'fi';
            } else if (src.includes('/en')) {
                return 'en';
            } else {
                return 'sv'; // StandardvÃ¤rde
            }
        }

        // Initialisera AI-agenten vid sidladdning
        setAgentLanguage();
    </script>

</body>
</html>
